<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Offer Generator</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css"
      integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;500&display=swap"
      rel="stylesheet"
    />
  </head>
  <style>
    * {
      font-family: Roboto, Helvetica, Arial, sans-serif;
    }
    body {
      padding: 1.5em;
      background: linear-gradient(90deg, #e3ffe7 0%, #d9e7ff 100%);
      font-size: 150%;
    }

    .row {
      display: flex;
    }

    .row > label {
      padding-right: 1em;
    }

    .pure-form-message {
      color: red;
    }

    .pure-g > div {
      padding-bottom: 10px;
    }

  </style>
  <script type="text/javascript">
    const validationFields = new Set(["offer-name"]);
    const invalidFields = new Set();

    function showValidation(name, show) {
      document.querySelector('[name="' + name + '-validation"]').style.display =
        show ? "block" : "none";
      show ? invalidFields.add(name) : invalidFields.delete(name);
    }

    document.addEventListener("input", function (e) {
      if (!!e.target.value.trim()) {
        showValidation(e.target.name, false);
      }
    });

    function serializeForm() {
      var form = document.querySelector("form");
      return Object.values(form).reduce((obj, field) => {
        if (field.type === "radio") {
          if (field.checked) obj[field.name] = field.value;
        } else {
          obj[field.name] = field.value;
        }
        return obj;
      }, {});
    }

    function validateData(data) {
      validationFields.forEach((name) => {
        const isInvalid = !data[name] || data[name].trim() == "";
        showValidation(name, isInvalid);
      });

      return invalidFields.size == 0;
    }

    // document.addEventListener(
    //   "click",
    //   function (event) {
    //     if (!event.target.matches(".pure-button")) return;

    //     event.preventDefault();

    //     const data = serializeForm();
    //     validateData(data);

    //     console.log(data, invalidFields);
    //   },
    //   false
    // );

    Telegram.WebApp.ready();
    Telegram.WebApp.MainButton.setText("–°–æ–∑–¥–∞—Ç—å ü™Ñ")
      .show()
      .onClick(function () {
        const data = serializeForm();
        if (validateData(data)) {
          Telegram.WebApp.sendData(JSON.stringify(data));
          Telegram.WebApp.close();
        }
      });
  </script>
  <body>
    <h3>üé© –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</h3>
    <form class="pure-form pure-form-stacked">
      <div class="pure-g">
        <div class="pure-u-1">
          <label>–¢–∏–ø –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</label>
          <div class="row">
            <label for="checkbox-radio-option-two" class="pure-radio">
              <input
                type="radio"
                id="checkbox-radio-option-two"
                name="offer-type"
                value="slogan"
              />
              –°–ª–æ–≥–∞–Ω
            </label>
            <label for="checkbox-radio-option-three" class="pure-radio">
              <input
                type="radio"
                id="checkbox-radio-option-three"
                name="offer-type"
                value="short offer"
              />
              –ö–æ—Ä–æ—Ç–∫–∏–π
            </label>
            <label for="checkbox-radio-option-three" class="pure-radio">
              <input
                type="radio"
                id="checkbox-radio-option-three"
                name="offer-type"
                value="long offer"
                checked=""
              />
              –î–ª–∏–Ω–Ω—ã–π
            </label>
          </div>
        </div>
        <div class="pure-u-1">
          <label for="multi-first-name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è/–ø—Ä–æ–¥—É–∫—Ç–∞*</label>
          <input
            type="text"
            id="multi-first-name"
            class="pure-input-1"
            name="offer-name"
            size="50"
            placeholder="(–Ω–∞–ø—Ä–∏–º–µ—Ä: —à–æ–∫–æ–ª–∞–¥–Ω—ã–µ –ø–∏—Ä–æ–∂–Ω—ã–µ)"
          />
          <span class="pure-form-message" name="offer-name-validation"
            >–≠—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ.</span
          >
        </div>
        <div class="pure-u-1">
          <label for="multi-first-name">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ*</label>
          <input
            name="description"
            size="100"
            class="pure-input-1"
            placeholder="(–Ω–∞–ø—Ä–∏–º–µ—Ä: –¥–æ–º–∞—à–Ω—è—è –≤—ã–ø–µ—á–∫–∞ –æ—Ç –º–æ–µ–π –º–∞–º—ã)"
          />
        </div>
        <div class="pure-u-1">
          <label for="multi-first-name">–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞</label>
          <input
            name="seed-words"
            size="50"
            class="pure-input-1"
            placeholder="(–Ω–∞–ø—Ä–∏–º–µ—Ä: –≤–∫—É—Å–Ω—ã–π, –∑–¥–æ—Ä–æ–≤—ã–π, —Å–≤–µ–∂–∏–π, –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–π)"
          />
        </div>
        <div class="pure-u-1">
          <label for="multi-first-name">–ú–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ</label>
          <input
            name="location"
            size="50"
            class="pure-input-1"
            placeholder="(–Ω–∞–ø—Ä–∏–º–µ—Ä: –ú–∞–Ω—Ö—ç—Ç—Ç–µ–Ω)"
          />
        </div>
        <div class="pure-u-1">
          <label for="multi-first-name">–û–∂–∏–¥–∞–µ–º—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã:</label>
          <input
            name="result"
            type="text"
            size="50"
            class="pure-input-1"
            placeholder="(–Ω–∞–ø—Ä–∏–º–µ—Ä: –ø—Ä–∏–ª–∏–≤ —ç–Ω–µ—Ä–≥–∏–∏)"
          />
        </div>
      </div>
    </form>
    <!-- <button class="pure-button">A Pure Button</button> -->
  </body>
  <script type="text/javascript">
    Telegram.WebApp.expand();
  </script>
</html>
